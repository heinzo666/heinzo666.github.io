<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visual Output Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .group {
      margin-bottom: 40px;
    }
    .images {
      display: flex;
      gap: 40px;
      align-items: center;
    }
    .hover-wrap {
      position: relative;
      width: 256px;
      height: 256px;
    }
    .hover-wrap img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: opacity 0.3s ease-in-out;
    }
    .hover-wrap img.mask {
      opacity: 0;
    }
    .hover-wrap:hover img.mask {
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Grouped Image Viewer</h1>
  <div id="container"></div>

  <script>
    fetch('filelist.json')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('container');

        for (const [group, files] of Object.entries(data)) {
          const div = document.createElement('div');
          div.className = 'group';
          div.innerHTML = `<h2>Group: ${group}</h2>`;

          const row = document.createElement('div');
          row.className = 'images';

          // Left: hover I -> M
          const hoverWrap = document.createElement('div');
          hoverWrap.className = 'hover-wrap';

          const iImg = files.initmask.find(f => f.endsWith('I.png'));
          const mImg = files.initmask.find(f => f.endsWith('M.png'));

          if (iImg && mImg) {
            const iTag = document.createElement('img');
            iTag.src = `https://raw.githubusercontent.com/heinzo666/initmask/main/outputs/${iImg}`;
            const mTag = document.createElement('img');
            mTag.src = `https://raw.githubusercontent.com/heinzo666/initmask/main/outputs/${mImg}`;
            mTag.classList.add('mask');

            hoverWrap.appendChild(iTag);
            hoverWrap.appendChild(mTag);
            row.appendChild(hoverWrap);
          }

          // Right: training image
          const hImg = files.training.find(f => f.startsWith('H'));
          if (hImg) {
            const hTag = document.createElement('img');
            hTag.src = `https://raw.githubusercontent.com/heinzo666/training/main/outputs/${hImg}`;
            hTag.style.width = '256px';
            hTag.style.height = '256px';
            hTag.style.objectFit = 'contain';
            row.appendChild(hTag);
          }

          div.appendChild(row);
          container.appendChild(div);
        }
      });
  </script>
</body>
</html>
